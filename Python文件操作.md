## Python文件操作

#### 1. 模块、包：

##### 1.1 模块：

**基本概念**：直观理解，就是一个.py文件。这个py文件中包含你所需的某项功能的代码，涉及到相关的函数、类。一个项目中往往需要实现多个功能，此时使用模块的好处就体现出来了，这极大地提高了代码的复用性，方便程序员维护。

**注意事项**：python里面包含内置模块和第三方模块，在使用相关模块时我们要注意模块与模块间是否重名。

##### 1.2 包：

**基本概念**：文件夹，用来管理文件。包，特殊的文件夹，用来管理模块。内含\__init__.py。现假设存在一个名为：company的包。该包下含有abc.py、xyz.py两个包。则当调用abc功能时，模块全称为company.abc。结构如下所示，可看出包是子包和模块的合集。

```python
mycompany
├─ __init__.py
├─ abc.py
└─ xyz.py
```

**理解\__init__.py:**  包内默认包含该文件，它也是一个模块，模块名为包名，作用是把生成包，如果没有该文件则变成普通文件目录。一般而言，该文件会自动执行里面的相关代码，常见的，就是批量导入包中的各个模块。

#### 1.3 库：

**基本概念：**解决一个问题所需要用到的模块合集。

#### 2. 常见的文件操作

##### 2.1 文件数据的读和写：

要对文件进行I/O操作，我们可以通过open()函数来以某种方式（'r'、'w'等等）访问该文件。在打开文件后，我们可以进行相关的读写操作。读写操作的具体代码如下所示。

```python
with open('data.txt','r') as F :
    a = f.read()
    print('a的内容是：%s'%a)
    #print('a的内容是：{}'.format(a))

with open('data2.txt','w') as f :
    b = 'the action of writing'
    f.write(b)

```

------

**<font color='red'>相关问题</font>**：**with 语句的作用？**

**答：**with语句常用于资源访问场合，无论是否发生异常都会执行必要的“清理”操作，释放资源，比如文件使用后自动关闭／线程中锁的自动获取和释放等。具体示例如下所示。

```python
a = open('1.txt')
f = a.read()
a.close()
```

在上述示例中，可能会出现以下问题：

1. 文件读取出现异常。
2. 忘记关闭文件句柄（上面的a.close()操作）

```python
#####引入异常处理
try:
    b = open('1.txt')
except:
    print('open problem')
    exit(-1)
try:
    c = b.read()
except:
    print('read problem')
finally:
    b.close()
    
```

上述改进感觉有些麻烦，此时我们使用with语句，看看效果如何。

```python
with open('1.txt') as f :
    a = f.read()
```

短短两行就可以实现上述异常处理的操作，可见with的优点。

------



##### 2.2 pathlib模块

##### 2.3 requests模块

##### 2.4 gzip模块

##### 2.5 pickle模块

#### 